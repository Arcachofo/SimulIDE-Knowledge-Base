# MCU

MCUs are [Modular](1-Circuit/Components/Modular%20Components/Modular.md) Components, defined in [MCU definition](1-Circuit/Components/Modular%20Components/Microcontrollers/MCU%20definition.md) files representing different modules inside the MCU as: cpu, memories, I/O ports, timers, etc.

# Microcontrollers supported:

[AVR](1-Circuit/Components/7-Micro/AVR.md)
[PIC](1-Circuit/Components/7-Micro/PIC.md)
[I51](1-Circuit/Components/7-Micro/I51.md)
[Arduino](1-Circuit/Components/7-Micro/Arduino.md)

# Relevant topics:

[MCU Monitor](1-Circuit/Components/Modular%20Components/MCU%20Monitor.md)
[Serial Monitor](1-Circuit/Components/Modular%20Components/Serial%20Monitor.md)
[MCU Fuses](1-Circuit/Components/Modular%20Components/Microcontrollers/MCU%20Fuses.md)

---

# Basic Use:

To do a Microcontroller simulation just pick the Microcontroller you want from the left panel and drop in the circuit, then build the circuit you need to test your firmware.
When your circuit is ready, Right-Click on the Microcontroller and select "Load firmware".
Select an .hex file to load to the  Microcontroller.
At the bottom panel you will a message:
If the hex file was correctly loaded you will see: "Firmware successfully loaded".
If not you will see an error message.

Microcontrollers in the simulation don't need a clock connected. The clock signal is always generated by the simulation.
To set the Microcontroller clock speed:
1. Right-click on the Microcontroller and select "Properties".
2. Set "Frequency" property at the desired speed.

By default clock speed is set to 20 Mhz for Pic and 16 Mhz for Avr and Arduino.

Now you are ready to power the circuit and watch the simulation.

---

# Context Menu:

- **Load firmware:** load an hex file to the Microcontroller.
- **Reload firmware:** reload an hex file loaded previously.
- **Load EEPROM data from file:** load data from file to Microcontroller's EEPROM.
- **Save EEPROM data to file:** save Microcontroller's EEPROM to file.
- **Open [MCU Monitor](1-Circuit/Components/Modular%20Components/MCU%20Monitor.md):** open a monitor to watch RAM, ROM, Flash and other info.
- **Open [Serial Monitor](1-Circuit/Components/Modular%20Components/Serial%20Monitor.md):** open a monitor to watch Serial communications.
- **[#Properties:](#Properties:)** opens properties dialog.

---

# Properties:

This is the Microcontroller's [Properties dialog](1-Circuit/Components/Properties%20dialog.md).

## Main tab:

- **Frequency:** set the frequency.
- **Firmware:** shows the path to the hex file loaded.
- **Reload hex at Simulation Start:** automatically reloads hex file at simulation start.

![mcu_props1](images/mcu_props1.png)
<br>

## Config tab:

These setting are equivalent to configuration bits ([MCU Fuses](1-Circuit/Components/Modular%20Components/Microcontrollers/MCU%20Fuses.md)).

- **Enable Reset Pin:** use reset pin if multiplexed with I/O pin.
   Pin can't be used as I/O pin.
- **External Oscillator:** disables oscillator pins if multiplexed with I/O pins.
   Pins can't be used as I/O pins.
- **Enable WatchDog:** Enable/disable watchdog.
  Enabling in configuration registers might be needed.

![mcu_props2](images/mcu_props2.png)

---

# Resources:

## Videos:
- [Microcontrollers basic use SimulIDE 1.0.0](https://www.youtube.com/watch?v=XcCq9B0rIDA)
- [Microcontroladores SimulIDE 1.0.0 (spanish)](https://www.youtube.com/watch?v=Qzu-brnP15s)
- [SimulIDE 1.0.0 multiple MCUs](https://www.youtube.com/watch?v=CcFM1lmQD_I)

## [MCU dev](4-Dev/MCU%20dev.md)

---

#hub